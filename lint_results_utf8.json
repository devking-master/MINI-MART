[{"filePath":"C:\\dev\\MINI-MART\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\GlobalCallUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[143,150],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useCall } from './context/CallContext';\r\nimport { Video, Phone, PhoneOff } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport VideoCall from './components/VideoCall';\r\nimport { useAuth } from './context/AuthContext';\r\n\r\nexport default function GlobalCallUI() {\r\n    const { currentUser } = useAuth();\r\n    const { incomingCall, activeCall, inCall, callType, acceptCall, declineCall, endCall } = useCall();\r\n\r\n    if (!currentUser) return null;\r\n\r\n    return (\r\n        <>\r\n            {/* Incoming Call Modal */}\r\n            <AnimatePresence>\r\n                {incomingCall && !inCall && (\r\n                    <div className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            className=\"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-8 w-full max-w-sm text-center border border-gray-100 dark:border-gray-800\"\r\n                        >\r\n                            <div className=\"w-24 h-24 mx-auto bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-6 animate-bounce\">\r\n                                {incomingCall.callType === 'video' ?\r\n                                    <Video size={40} className=\"text-blue-600 dark:text-blue-400\" /> :\r\n                                    <Phone size={40} className=\"text-blue-600 dark:text-blue-400\" />\r\n                                }\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                                Incoming {incomingCall.callType === 'video' ? 'Video' : 'Audio'} Call\r\n                            </h3>\r\n                            <p className=\"text-gray-500 dark:text-gray-400 mb-8\">\r\n                                from {incomingCall.callerName || 'Someone'}\r\n                            </p>\r\n\r\n                            <div className=\"flex gap-4\">\r\n                                <button\r\n                                    onClick={declineCall}\r\n                                    className=\"flex-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 font-bold py-4 rounded-2xl hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <PhoneOff size={20} /> Decline\r\n                                </button>\r\n                                <button\r\n                                    onClick={acceptCall}\r\n                                    className=\"flex-1 bg-green-500 text-white font-bold py-4 rounded-2xl hover:bg-green-600 transition-colors shadow-xl shadow-green-500/30 flex items-center justify-center gap-2 animate-pulse\"\r\n                                >\r\n                                    <Phone size={20} /> Accept\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Video Call Overlay */}\r\n            {inCall && activeCall && (\r\n                <VideoCall\r\n                    chatId={activeCall.chatId}\r\n                    currentUser={currentUser}\r\n                    targetUser={{\r\n                        uid: activeCall.callerId === currentUser.uid ? activeCall.calleeId : activeCall.callerId,\r\n                        name: activeCall.callerId === currentUser.uid ? activeCall.calleeName : activeCall.callerName\r\n                    }}\r\n                    callType={callType}\r\n                    onClose={endCall}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\components\\CategoryPills.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[28,67],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst categories = [\r\n    \"All\",\r\n    \"Electronics\",\r\n    \"Furniture\",\r\n    \"Clothing\",\r\n    \"Vehicles\",\r\n    \"Books\",\r\n    \"Services\",\r\n    \"Other\"\r\n];\r\n\r\nexport default function CategoryPills({ selected, onSelect }) {\r\n    return (\r\n        <div className=\"flex gap-2 overflow-x-auto pb-4 pt-2 scrollbar-hide mask-fade\">\r\n            {categories.map((category) => (\r\n                <button\r\n                    key={category}\r\n                    onClick={() => onSelect(category)}\r\n                    className={`relative px-5 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-300 ring-2 ring-transparent focus:outline-none focus:ring-blue-200 dark:focus:ring-blue-800 ${selected === category\r\n                        ? 'text-white bg-gray-900 dark:bg-blue-600 shadow-lg shadow-gray-900/20 dark:shadow-blue-900/40 scale-105'\r\n                        : 'text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                        }`}\r\n\r\n                >\r\n                    {category}\r\n                    {selected === category && (\r\n                        <motion.div\r\n                            layoutId=\"activePill\"\r\n                            className=\"absolute inset-0 rounded-full bg-white/10\"\r\n                        />\r\n                    )}\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\components\\ImageUpload.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\components\\Layout.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[360,367],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n  143 |             {/* Desktop Sidebar */}\n  144 |             <div className=\"hidden md:block w-64 h-screen sticky top-0 z-50\">\n> 145 |                 <SidebarContent />\n      |                  ^^^^^^^^^^^^^^ This component is created during render\n  146 |             </div>\n  147 |\n  148 |             {/* Mobile Header */}\n\n   56 |     ];\n   57 |\n>  58 |     const SidebarContent = () => (\n      |                            ^^^^^^^\n>  59 |         <div className=\"flex flex-col h-full bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 transition-colors duration-300\">\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  60 |             <div className=\"p-6 flex items-center justify-between\">\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 138 |         </div>\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 139 |     );\n      | ^^^^^^ The component is created during render here\n  140 |\n  141 |     return (\n  142 |         <div className=\"min-h-screen bg-gray-50/50 dark:bg-gray-950 flex transition-colors duration-300\">","line":145,"column":18,"nodeType":null,"endLine":145,"endColumn":32},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n  194 |                             className=\"md:hidden fixed inset-y-0 left-0 w-[280px] bg-white dark:bg-gray-900 z-50 shadow-2xl\"\n  195 |                         >\n> 196 |                             <SidebarContent />\n      |                              ^^^^^^^^^^^^^^ This component is created during render\n  197 |                         </motion.div>\n  198 |                     </>\n  199 |                 )}\n\n   56 |     ];\n   57 |\n>  58 |     const SidebarContent = () => (\n      |                            ^^^^^^^\n>  59 |         <div className=\"flex flex-col h-full bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 transition-colors duration-300\">\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  60 |             <div className=\"p-6 flex items-center justify-between\">\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 138 |         </div>\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 139 |     );\n      | ^^^^^^ The component is created during render here\n  140 |\n  141 |     return (\n  142 |         <div className=\"min-h-screen bg-gray-50/50 dark:bg-gray-950 flex transition-colors duration-300\">","line":196,"column":30,"nodeType":null,"endLine":196,"endColumn":44}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { NavLink, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useTheme } from '../context/ThemeContext';\r\nimport { LayoutDashboard, MessageSquare, PlusCircle, LogOut, User, Menu, X, ShoppingBag, Sun, Moon } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { db } from '../firebase';\r\nimport { collection, query, where, onSnapshot } from 'firebase/firestore';\r\n\r\nexport default function Layout({ children }) {\r\n    const { currentUser, logout } = useAuth();\r\n    const { theme, toggleTheme } = useTheme();\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await logout();\r\n            navigate('/login');\r\n        } catch {\r\n            console.error(\"Failed to log out\");\r\n        }\r\n    };\r\n\r\n    // Calculate unread messages\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const q = query(\r\n            collection(db, \"chats\"),\r\n            where(\"participants\", \"array-contains\", currentUser.uid)\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            let totalUnread = 0;\r\n            snapshot.docs.forEach(doc => {\r\n                const data = doc.data();\r\n                if (data.unreadCounts && data.unreadCounts[currentUser.uid]) {\r\n                    totalUnread += data.unreadCounts[currentUser.uid];\r\n                }\r\n            });\r\n            setUnreadCount(totalUnread);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, [currentUser]);\r\n\r\n    const navItems = [\r\n        { name: 'Browse', path: '/', icon: ShoppingBag },\r\n        { name: 'Sell Item', path: '/create-listing', icon: PlusCircle },\r\n        { name: 'Messages', path: '/chat', icon: MessageSquare },\r\n        { name: 'Profile', path: '/profile', icon: User },\r\n    ];\r\n\r\n    const SidebarContent = () => (\r\n        <div className=\"flex flex-col h-full bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 transition-colors duration-300\">\r\n            <div className=\"p-6 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-blue-500/30\">\r\n                        M\r\n                    </div>\r\n                    <span className=\"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400\">\r\n                        Mini Mart\r\n                    </span>\r\n                </div>\r\n                <button\r\n                    onClick={toggleTheme}\r\n                    className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\r\n                >\r\n                    {theme === 'light' ? <Moon size={18} /> : <Sun size={18} />}\r\n                </button>\r\n            </div>\r\n\r\n            <nav className=\"flex-1 px-4 space-y-2 py-4\">\r\n                {navItems.map((item) => {\r\n                    const isActive = location.pathname === item.path;\r\n                    return (\r\n                        <NavLink\r\n                            key={item.path}\r\n                            to={item.path}\r\n                            onClick={() => setIsMobileMenuOpen(false)}\r\n                            className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 relative overflow-hidden group ${isActive\r\n                                ? 'text-blue-600 bg-blue-50 dark:bg-blue-900/20 shadow-sm'\r\n                                : 'text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white'\r\n                                }`}\r\n                        >\r\n                            {isActive && (\r\n                                <motion.div\r\n                                    layoutId=\"activeTab\"\r\n                                    className=\"absolute left-0 top-0 bottom-0 w-1 bg-blue-600 rounded-r-full\"\r\n                                />\r\n                            )}\r\n\r\n                            <div className=\"relative\">\r\n                                <item.icon size={20} className={isActive ? 'stroke-[2.5px]' : 'stroke-2'} />\r\n                                {item.name === 'Messages' && unreadCount > 0 && (\r\n                                    <span className=\"absolute -top-1 -right-1 flex h-2.5 w-2.5\">\r\n                                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\r\n                                        <span className=\"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500\"></span>\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <span className=\"font-medium\">{item.name}</span>\r\n                        </NavLink>\r\n                    );\r\n                })}\r\n            </nav>\r\n\r\n            <div className=\"p-4 border-t border-gray-100 dark:border-gray-800\">\r\n                <div className=\"flex items-center gap-3 px-4 py-3 mb-2\">\r\n                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white text-xs font-bold ring-2 ring-white dark:ring-gray-800 shadow-md overflow-hidden\">\r\n                        {currentUser?.photoURL ? (\r\n                            <img src={currentUser.photoURL} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            currentUser?.email?.[0].toUpperCase()\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\r\n                            {currentUser?.email?.split('@')[0]}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\r\n                            Online\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={handleLogout}\r\n                    className=\"flex items-center gap-3 px-4 py-2 w-full text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-sm font-medium\"\r\n                >\r\n                    <LogOut size={18} />\r\n                    Sign Out\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50/50 dark:bg-gray-950 flex transition-colors duration-300\">\r\n            {/* Desktop Sidebar */}\r\n            <div className=\"hidden md:block w-64 h-screen sticky top-0 z-50\">\r\n                <SidebarContent />\r\n            </div>\r\n\r\n            {/* Mobile Header */}\r\n            <div className=\"md:hidden fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-3 flex items-center justify-between transition-colors\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg\">\r\n                        M\r\n                    </div>\r\n                    <span className=\"font-bold text-gray-900 dark:text-white\">Mini Mart</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        onClick={toggleTheme}\r\n                        className=\"p-2 text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg\"\r\n                    >\r\n                        {theme === 'light' ? <Moon size={18} /> : <Sun size={18} />}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n                        className=\"p-2 text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg relative\"\r\n                    >\r\n                        {isMobileMenuOpen ? <X size={20} /> : <Menu size={20} />}\r\n                        {!isMobileMenuOpen && unreadCount > 0 && (\r\n                            <span className=\"absolute -top-1 -right-1 flex h-3 w-3\">\r\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\r\n                                <span className=\"relative inline-flex rounded-full h-3 w-3 bg-red-500 border-2 border-white\"></span>\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Drawer */}\r\n            <AnimatePresence>\r\n                {isMobileMenuOpen && (\r\n                    <>\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            onClick={() => setIsMobileMenuOpen(false)}\r\n                            className=\"md:hidden fixed inset-0 bg-black/50 z-40 backdrop-blur-sm\"\r\n                        />\r\n                        <motion.div\r\n                            initial={{ x: '-100%' }}\r\n                            animate={{ x: 0 }}\r\n                            exit={{ x: '-100%' }}\r\n                            transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                            className=\"md:hidden fixed inset-y-0 left-0 w-[280px] bg-white dark:bg-gray-900 z-50 shadow-2xl\"\r\n                        >\r\n                            <SidebarContent />\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 min-w-0 md:p-8 p-4 pt-20 md:pt-8\">\r\n                <motion.div\r\n                    key={location.pathname}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.3 }}\r\n                    className=\"max-w-6xl mx-auto\"\r\n                >\r\n                    {children}\r\n                </motion.div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\components\\VideoCall.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'pc' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":23,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"pc"},"fix":{"range":[842,844],"text":""},"desc":"Remove unused variable 'pc'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":261,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":19},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":261,"column":21,"nodeType":"BlockStatement","messageId":"unexpected","endLine":261,"endColumn":24,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[10725,10726],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { db } from '../firebase';\r\nimport { doc, onSnapshot, setDoc, updateDoc, deleteDoc, addDoc, collection, getDoc, serverTimestamp, increment } from 'firebase/firestore';\r\nimport { Video, Mic, MicOff, VideoOff, PhoneOff } from 'lucide-react';\r\n\r\n// WebRTC Configuration\r\nconst servers = {\r\n    iceServers: [\r\n        {\r\n            urls: [\r\n                'stun:stun1.l.google.com:19302',\r\n                'stun:stun2.l.google.com:19302',\r\n                'stun:stun.l.google.com:19302',\r\n                'stun:stun3.l.google.com:19302',\r\n                'stun:stun4.l.google.com:19302',\r\n            ],\r\n        },\r\n    ],\r\n    iceCandidatePoolSize: 10,\r\n};\r\n\r\nexport default function VideoCall({ chatId, currentUser, targetUser, callType = 'video', onClose }) {\r\n    const [pc, setPc] = useState(null);\r\n    const [, setLocalStream] = useState(null); // Keep state but unused in render for now\r\n    const [, setRemoteStream] = useState(null); // Keep state for consistency\r\n    const [status, setStatus] = useState(\"initializing\"); // initializing, calling, connected, incoming, offering, answered\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const [isVideoOff, setIsVideoOff] = useState(callType === 'audio');\r\n    const [isCaller, setIsCaller] = useState(false);\r\n\r\n    const localVideoRef = useRef();\r\n    const remoteVideoRef = useRef();\r\n\r\n    // Refs for state that needs to be accessed in async callbacks/cleanup without stale closures\r\n    const pcRef = useRef(null);\r\n    const localStreamRef = useRef(null);\r\n    const candidateQueue = useRef([]); // Queue for ICE candidates\r\n\r\n    useEffect(() => {\r\n        let unsubscribeDoc = null;\r\n        let unsubscribeCandidates = null;\r\n        let canceled = false;\r\n\r\n        const startCall = async () => {\r\n            const pc = new RTCPeerConnection(servers);\r\n            pcRef.current = pc;\r\n            setPc(pc);\r\n\r\n            // Get Local Stream\r\n            const constraints = {\r\n                audio: true,\r\n                video: callType === 'video'\r\n            };\r\n\r\n            try {\r\n                const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n                if (canceled) {\r\n                    stream.getTracks().forEach(track => track.stop());\r\n                    return;\r\n                }\r\n\r\n                localStreamRef.current = stream;\r\n                setLocalStream(stream);\r\n\r\n                if (localVideoRef.current && callType === 'video') {\r\n                    localVideoRef.current.srcObject = stream;\r\n                }\r\n\r\n                stream.getTracks().forEach(track => pc.addTrack(track, stream));\r\n            } catch (err) {\r\n                console.error(\"Error accessing media devices:\", err);\r\n                if (!canceled) {\r\n                    alert(\"Could not access camera/microphone. Please check permissions.\");\r\n                    onClose();\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Handle Remote Stream\r\n            pc.ontrack = (event) => {\r\n                const stream = event.streams[0] || new MediaStream();\r\n                if (!event.streams[0]) stream.addTrack(event.track);\r\n\r\n                setRemoteStream(stream);\r\n                if (remoteVideoRef.current) {\r\n                    remoteVideoRef.current.srcObject = stream;\r\n                }\r\n            };\r\n\r\n            const callDocRef = doc(db, \"chats\", chatId, \"calls\", \"active_call\");\r\n            const offerCandidates = collection(callDocRef, 'offerCandidates');\r\n            const answerCandidates = collection(callDocRef, 'answerCandidates');\r\n\r\n            const callDocSnapshot = await getDoc(callDocRef);\r\n            if (canceled) return;\r\n\r\n            if (!callDocSnapshot.exists()) {\r\n                // --- CALLER LOGIC ---\r\n                setIsCaller(true);\r\n                setStatus(\"calling\");\r\n\r\n                pc.onicecandidate = (event) => {\r\n                    if (event.candidate) {\r\n                        addDoc(offerCandidates, event.candidate.toJSON());\r\n                    }\r\n                };\r\n\r\n                const offerDescription = await pc.createOffer();\r\n                await pc.setLocalDescription(offerDescription);\r\n\r\n                await setDoc(callDocRef, {\r\n                    offer: { type: offerDescription.type, sdp: offerDescription.sdp },\r\n                    callerId: currentUser.uid,\r\n                    callerName: currentUser.displayName || 'Seller',\r\n                    calleeId: targetUser.uid,\r\n                    calleeName: targetUser.name,\r\n                    callType: callType,\r\n                    status: \"offering\",\r\n                    createdAt: serverTimestamp()\r\n                });\r\n\r\n                // Listen for Answer\r\n                unsubscribeDoc = onSnapshot(callDocRef, async (snapshot) => {\r\n                    if (canceled) return;\r\n                    if (!snapshot.exists()) {\r\n                        onClose();\r\n                        return;\r\n                    }\r\n\r\n                    const data = snapshot.data();\r\n                    if (!pc.currentRemoteDescription && data?.answer) {\r\n                        const answerDescription = new RTCSessionDescription(data.answer);\r\n                        await pc.setRemoteDescription(answerDescription);\r\n                        setStatus(\"connected\");\r\n\r\n                        // Flush ICE candidates\r\n                        while (candidateQueue.current.length > 0) {\r\n                            const candidate = candidateQueue.current.shift();\r\n                            pc.addIceCandidate(candidate).catch(e => console.error(\"Error flushing candidate\", e));\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Listen for Answer Candidates\r\n                unsubscribeCandidates = onSnapshot(answerCandidates, (snapshot) => {\r\n                    snapshot.docChanges().forEach((change) => {\r\n                        if (change.type === 'added') {\r\n                            const candidate = new RTCIceCandidate(change.doc.data());\r\n                            if (pc.remoteDescription) {\r\n                                pc.addIceCandidate(candidate).catch(e => console.error(\"Error adding candidate\", e));\r\n                            } else {\r\n                                candidateQueue.current.push(candidate);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                // --- CALLEE LOGIC ---\r\n                setIsCaller(false);\r\n                setStatus(\"connecting\");\r\n                const data = callDocSnapshot.data();\r\n\r\n                pc.onicecandidate = (event) => {\r\n                    if (event.candidate) {\r\n                        addDoc(answerCandidates, event.candidate.toJSON());\r\n                    }\r\n                };\r\n\r\n                // Listen for Hangup\r\n                unsubscribeDoc = onSnapshot(callDocRef, (snapshot) => {\r\n                    if (canceled) return;\r\n                    if (!snapshot.exists()) onClose();\r\n                });\r\n\r\n                await pc.setRemoteDescription(new RTCSessionDescription(data.offer));\r\n\r\n                // Flush candidates\r\n                while (candidateQueue.current.length > 0) {\r\n                    const candidate = candidateQueue.current.shift();\r\n                    pc.addIceCandidate(candidate).catch(e => console.error(\"Error flushing candidate\", e));\r\n                }\r\n\r\n                const answerDescription = await pc.createAnswer();\r\n                await pc.setLocalDescription(answerDescription);\r\n\r\n                await updateDoc(callDocRef, {\r\n                    answer: { type: answerDescription.type, sdp: answerDescription.sdp },\r\n                    status: \"answered\"\r\n                });\r\n\r\n                setStatus(\"connected\");\r\n\r\n                // Listen for Offer Candidates\r\n                unsubscribeCandidates = onSnapshot(offerCandidates, (snapshot) => {\r\n                    snapshot.docChanges().forEach((change) => {\r\n                        if (change.type === 'added') {\r\n                            const candidate = new RTCIceCandidate(change.doc.data());\r\n                            if (pc.remoteDescription) {\r\n                                pc.addIceCandidate(candidate).catch(e => console.error(\"Error adding candidate\", e));\r\n                            } else {\r\n                                candidateQueue.current.push(candidate);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        };\r\n\r\n        startCall();\r\n\r\n        return () => {\r\n            canceled = true;\r\n            if (localStreamRef.current) localStreamRef.current.getTracks().forEach(track => track.stop());\r\n            if (pcRef.current) pcRef.current.close();\r\n            if (unsubscribeDoc) unsubscribeDoc();\r\n            if (unsubscribeCandidates) unsubscribeCandidates();\r\n        }\r\n    }, [chatId, callType, currentUser, targetUser, onClose]);\r\n\r\n    const toggleMute = () => {\r\n        if (localStreamRef.current) {\r\n            const enabled = !isMuted;\r\n            setIsMuted(enabled);\r\n            localStreamRef.current.getAudioTracks().forEach(track => track.enabled = !enabled);\r\n        }\r\n    };\r\n\r\n    const toggleVideo = () => {\r\n        if (localStreamRef.current) {\r\n            const enabled = !isVideoOff;\r\n            setIsVideoOff(enabled);\r\n            localStreamRef.current.getVideoTracks().forEach(track => track.enabled = !enabled);\r\n        }\r\n    };\r\n\r\n    const handleEndCall = async () => {\r\n        if (isCaller && status === 'calling') {\r\n            try {\r\n                // Log missed call\r\n                await addDoc(collection(db, \"chats\", chatId, \"messages\"), {\r\n                    text: `Missed ${callType} call`,\r\n                    senderId: currentUser.uid,\r\n                    isSystemMessage: true,\r\n                    timestamp: serverTimestamp()\r\n                });\r\n\r\n                await updateDoc(doc(db, \"chats\", chatId), {\r\n                    lastMessage: `Missed ${callType} call`,\r\n                    lastMessageSenderId: currentUser.uid,\r\n                    lastMessageTimestamp: serverTimestamp(),\r\n                    [`unreadCounts.${targetUser.uid}`]: increment(1)\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error logging missed call:\", error);\r\n            }\r\n        }\r\n\r\n        try {\r\n            await deleteDoc(doc(db, \"chats\", chatId, \"calls\", \"active_call\"));\r\n        } catch (e) { }\r\n\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] bg-gray-900 text-white overflow-hidden\">\r\n            <div className=\"absolute inset-0 w-full h-full\">\r\n                <video\r\n                    ref={remoteVideoRef}\r\n                    autoPlay\r\n                    playsInline\r\n                    className={`w-full h-full object-cover transition-opacity duration-500 ${(status === 'connected' || status === 'connecting') ? 'opacity-100' : 'opacity-0'}`}\r\n                />\r\n\r\n                {status !== 'connected' && (\r\n                    <div className=\"absolute inset-0 bg-gray-900 flex flex-col items-center justify-center\">\r\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-900/40 to-purple-900/40 animate-pulse\" />\r\n                        <div className=\"relative z-10 mb-8\">\r\n                            <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-white/10 shadow-2xl bg-gray-800 flex items-center justify-center text-4xl font-bold\">\r\n                                {targetUser.name?.[0]?.toUpperCase()}\r\n                            </div>\r\n                            <div className=\"absolute inset-0 -z-10 rounded-full border border-white/20 scale-125 animate-[ping_2s_ease-out_infinite]\" />\r\n                        </div>\r\n                        <div className=\"relative z-10 text-center space-y-2\">\r\n                            <h2 className=\"text-3xl font-bold\">{targetUser.name}</h2>\r\n                            <p className=\"text-lg text-blue-200 font-medium animate-pulse\">\r\n                                {status === 'calling' ? 'Calling...' : status === 'initializing' ? 'Initializing...' : 'Connecting...'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {status === 'connected' && (\r\n                <div className=\"absolute top-0 left-0 right-0 p-6 pt-12 bg-gradient-to-b from-black/70 to-transparent z-20 flex justify-between items-start pointer-events-none\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-gray-700/50 backdrop-blur border border-white/20 flex items-center justify-center font-bold\">\r\n                            {targetUser.name?.[0]}\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg leading-tight\">{targetUser.name}</h3>\r\n                            <p className=\"text-xs text-white/70\">Connected</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {callType === 'video' && (\r\n                <div className=\"absolute top-4 right-4 z-30 w-32 md:w-48 aspect-[3/4] md:aspect-video rounded-2xl overflow-hidden shadow-2xl border border-white/20 bg-gray-800\">\r\n                    <video\r\n                        ref={localVideoRef}\r\n                        autoPlay\r\n                        playsInline\r\n                        muted\r\n                        className={`w-full h-full object-cover ${isVideoOff ? 'hidden' : ''}`}\r\n                    />\r\n                    {isVideoOff && (\r\n                        <div className=\"w-full h-full flex flex-col items-center justify-center bg-gray-900 text-gray-500 gap-2\">\r\n                            <VideoOff size={24} />\r\n                            <span className=\"text-[10px] uppercase font-bold\">Camera Off</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"absolute bottom-10 left-0 right-0 z-30 flex justify-center items-end pb-8 px-4\">\r\n                <div className=\"flex items-center gap-4 bg-black/40 backdrop-blur-xl border border-white/10 p-3 rounded-3xl shadow-2xl pointer-events-auto\">\r\n                    <button\r\n                        onClick={toggleMute}\r\n                        className={`p-4 rounded-full transition-all ${isMuted ? 'bg-white text-gray-900' : 'bg-white/10 text-white hover:bg-white/20'}`}\r\n                    >\r\n                        {isMuted ? <MicOff size={24} /> : <Mic size={24} />}\r\n                    </button>\r\n\r\n                    {callType === 'video' && (\r\n                        <button\r\n                            onClick={toggleVideo}\r\n                            className={`p-4 rounded-full transition-all ${isVideoOff ? 'bg-white text-gray-900' : 'bg-white/10 text-white hover:bg-white/20'}`}\r\n                        >\r\n                            {isVideoOff ? <VideoOff size={24} /> : <Video size={24} />}\r\n                        </button>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={handleEndCall}\r\n                        className=\"p-4 rounded-full bg-red-500 text-white shadow-lg hover:bg-red-600 active:scale-95 transition-all mx-2\"\r\n                    >\r\n                        <PhoneOff size={28} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":15,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":15,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    signOut,\r\n    onAuthStateChanged,\r\n    updateProfile,\r\n    sendPasswordResetEmail\r\n} from \"firebase/auth\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    function signup(email, password) {\r\n        return createUserWithEmailAndPassword(auth, email, password);\r\n    }\r\n\r\n    function login(email, password) {\r\n        return signInWithEmailAndPassword(auth, email, password);\r\n    }\r\n\r\n    function logout() {\r\n        return signOut(auth);\r\n    }\r\n\r\n    function updateUserProfile(user, data) {\r\n        return updateProfile(user, data).then(() => {\r\n            setCurrentUser({ ...user }); // Force state update\r\n        });\r\n    }\r\n\r\n    function resetPassword(email) {\r\n        return sendPasswordResetEmail(auth, email);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n            setCurrentUser(user);\r\n            setLoading(false);\r\n\r\n            if (user) {\r\n                // Presence Heartbeat\r\n                const userRef = doc(db, \"users\", user.uid);\r\n                await setDoc(userRef, {\r\n                    email: user.email,\r\n                    displayName: user.displayName || user.email.split('@')[0],\r\n                    photoURL: user.photoURL,\r\n                    lastSeen: serverTimestamp(),\r\n                    isOnline: true\r\n                }, { merge: true });\r\n            }\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, []);\r\n\r\n    // Periodic Heartbeat\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const interval = setInterval(async () => {\r\n            try {\r\n                await setDoc(doc(db, \"users\", currentUser.uid), {\r\n                    lastSeen: serverTimestamp(),\r\n                    isOnline: true\r\n                }, { merge: true });\r\n            } catch (err) {\r\n                console.error(\"Heartbeat error:\", err);\r\n            }\r\n        }, 120000); // 2 minutes\r\n\r\n        return () => clearInterval(interval);\r\n    }, [currentUser]);\r\n\r\n    const value = {\r\n        currentUser,\r\n        signup,\r\n        login,\r\n        logout,\r\n        updateUserProfile,\r\n        resetPassword\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\context\\CallContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":21},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  18 |     useEffect(() => {\n  19 |         if (!currentUser) {\n> 20 |             setIncomingCall(null);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |             setActiveCall(null);\n  22 |             setInCall(false);\n  23 |             return;","line":20,"column":13,"nodeType":null,"endLine":20,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { db } from '../firebase';\r\nimport { collectionGroup, query, where, onSnapshot, doc, deleteDoc } from 'firebase/firestore';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst CallContext = createContext();\r\n\r\nexport const useCall = () => useContext(CallContext);\r\n\r\nexport const CallProvider = ({ children }) => {\r\n    const { currentUser } = useAuth();\r\n    const [incomingCall, setIncomingCall] = useState(null);\r\n    const [activeCall, setActiveCall] = useState(null);\r\n    const [inCall, setInCall] = useState(false);\r\n    const [callType, setCallType] = useState('video');\r\n\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setIncomingCall(null);\r\n            setActiveCall(null);\r\n            setInCall(false);\r\n            return;\r\n        }\r\n\r\n        // collectionGroup query to find any active_call where we are the callee\r\n        const q = query(\r\n            collectionGroup(db, \"calls\"),\r\n            where(\"calleeId\", \"==\", currentUser.uid),\r\n            where(\"status\", \"==\", \"offering\")\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            if (snapshot.empty) {\r\n                setIncomingCall(null);\r\n                return;\r\n            }\r\n\r\n            // Get the first offering call (assuming single call support for now)\r\n            const doc = snapshot.docs[0];\r\n            const data = doc.data();\r\n\r\n            // Extract chatId from the document path: chats/{chatId}/calls/active_call\r\n            // Parent of active_call is 'calls', parent of 'calls' is 'chats/{chatId}'\r\n            const chatId = doc.ref.parent.parent.id;\r\n\r\n            setIncomingCall({ ...data, chatId, id: doc.id });\r\n\r\n            // Show browser notification if possible\r\n            if (document.visibilityState === 'hidden' && Notification.permission === 'granted') {\r\n                new Notification(\"Incoming Call\", {\r\n                    body: `Call from ${data.callerName || 'Someone'}`,\r\n                    tag: 'incoming-call'\r\n                });\r\n            }\r\n        }, (error) => {\r\n            console.error(\"Global Call Listener Error:\", error);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, [currentUser]);\r\n\r\n    const acceptCall = () => {\r\n        if (incomingCall) {\r\n            setCallType(incomingCall.callType || 'video');\r\n            setActiveCall(incomingCall);\r\n            setInCall(true);\r\n            setIncomingCall(null);\r\n        }\r\n    };\r\n\r\n    const declineCall = async () => {\r\n        if (incomingCall) {\r\n            try {\r\n                const callDocRef = doc(db, \"chats\", incomingCall.chatId, \"calls\", \"active_call\");\r\n                await deleteDoc(callDocRef);\r\n                setIncomingCall(null);\r\n            } catch (err) {\r\n                console.error(\"Error declining call:\", err);\r\n            }\r\n        }\r\n    };\r\n\r\n    const endCall = () => {\r\n        setActiveCall(null);\r\n        setInCall(false);\r\n    };\r\n\r\n    return (\r\n        <CallContext.Provider value={{\r\n            incomingCall,\r\n            activeCall,\r\n            inCall,\r\n            callType,\r\n            setCallType,\r\n            acceptCall,\r\n            declineCall,\r\n            endCall,\r\n            setActiveCall,\r\n            setInCall\r\n        }}>\r\n            {children}\r\n        </CallContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport function useTheme() {\r\n    return useContext(ThemeContext);\r\n}\r\n\r\nexport function ThemeProvider({ children }) {\r\n    const [theme, setTheme] = useState(() => {\r\n        const savedTheme = localStorage.getItem('theme');\r\n        if (savedTheme) return savedTheme;\r\n        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n    });\r\n\r\n    useEffect(() => {\r\n        const root = window.document.documentElement;\r\n        if (theme === 'dark') {\r\n            root.classList.add('dark');\r\n            document.body.classList.add('dark');\r\n        } else {\r\n            root.classList.remove('dark');\r\n            document.body.classList.remove('dark');\r\n        }\r\n        localStorage.setItem('theme', theme);\r\n        console.log('Theme changed to:', theme);\r\n    }, [theme]);\r\n\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => (prev === 'light' ? 'dark' : 'light'));\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\Chat.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[484,523],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`scrollToBottom` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  134 |             const msgs = snapshot.docs.map(doc => doc.data());\n  135 |             setMessages(msgs);\n> 136 |             setTimeout(scrollToBottom, 50);\n      |                        ^^^^^^^^^^^^^^ `scrollToBottom` accessed before it is declared\n  137 |         });\n  138 |\n  139 |         // Clear unread count\n\n  162 |     }, [selectedChat, currentUser.uid]);\n  163 |\n> 164 |     const scrollToBottom = () => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 165 |         messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 166 |     };\n      | ^^^^^^^ `scrollToBottom` is declared here\n  167 |\n  168 |     const sendMessage = async (e) => {\n  169 |         e.preventDefault();","line":136,"column":24,"nodeType":null,"endLine":136,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useCall } from '../context/CallContext';\r\nimport { db } from \"../firebase\";\r\nimport { collection, query, where, orderBy, onSnapshot, addDoc, serverTimestamp, doc, setDoc, updateDoc, increment } from \"firebase/firestore\";\r\nimport { Send, ArrowLeft, MoreVertical, Video, Phone, MessageCircle } from \"lucide-react\";\r\nimport { motion } from 'framer-motion';\r\n\r\nexport default function Chat() {\r\n    const { currentUser } = useAuth();\r\n    const { setInCall, setCallType } = useCall();\r\n    const location = useLocation();\r\n    \r\n    const [chats, setChats] = useState([]);\r\n    const [selectedChat, setSelectedChat] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    const [targetUserStatus, setTargetUserStatus] = useState(null);\r\n    \r\n    const messagesEndRef = useRef(null);\r\n    const selectedChatRef = useRef(null);\r\n\r\n    // Keep ref in sync with state for background notifications\r\n    useEffect(() => {\r\n        selectedChatRef.current = selectedChat;\r\n    }, [selectedChat]);\r\n\r\n    // Listen for Chats List & Local Notifications\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const q = query(\r\n            collection(db, \"chats\"),\r\n            where(\"participants\", \"array-contains\", currentUser.uid)\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            snapshot.docChanges().forEach((change) => {\r\n                const data = change.doc.data();\r\n                if (change.type === 'modified') {\r\n                    const isNewMessage = data.lastMessageSenderId && data.lastMessageSenderId !== currentUser.uid;\r\n                    const isNotFocused = document.visibilityState === 'hidden' || selectedChatRef.current?.id !== change.doc.id;\r\n                    const isRecent = data.lastMessageTimestamp?.toMillis() > Date.now() - 5000;\r\n\r\n                    if (isNewMessage && isNotFocused && isRecent && Notification.permission === 'granted') {\r\n                        new Notification(\"New Message\", {\r\n                            body: data.lastMessage,\r\n                            icon: '/pwa-192x192.png'\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            const chatsData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })).sort((a, b) => {\r\n                const timeA = b.lastMessageTimestamp?.seconds || b.createdAt?.seconds || 0;\r\n                const timeB = a.lastMessageTimestamp?.seconds || a.createdAt?.seconds || 0;\r\n                return timeA - timeB;\r\n            });\r\n            setChats(chatsData);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, [currentUser]);\r\n\r\n    // Handle initial chat selection from navigation state\r\n    useEffect(() => {\r\n        if (location.state?.targetUser) {\r\n            const { targetUser } = location.state;\r\n            const participants = [currentUser.uid, targetUser.uid].sort();\r\n            const chatId = participants.join('_');\r\n\r\n            const participantData = {\r\n                [currentUser.uid]: {\r\n                    email: currentUser.email,\r\n                    name: currentUser.displayName || currentUser.email.split('@')[0],\r\n                    photo: currentUser.photoURL || null\r\n                },\r\n                [targetUser.uid]: {\r\n                    email: targetUser.email,\r\n                    name: targetUser.displayName || targetUser.email.split('@')[0],\r\n                    photo: targetUser.photoURL || null\r\n                }\r\n            };\r\n\r\n            const existingChat = chats.find(c => c.id === chatId);\r\n            const sortedEmails = participants.map(uid => participantData[uid].email);\r\n            const sortedNames = participants.map(uid => participantData[uid].name);\r\n            const sortedPhotos = participants.map(uid => participantData[uid].photo);\r\n\r\n            if (existingChat) {\r\n                // Background update metadata if it changed\r\n                const chatDocRef = doc(db, \"chats\", chatId);\r\n                updateDoc(chatDocRef, {\r\n                    participantNames: sortedNames,\r\n                    participantPhotos: sortedPhotos\r\n                }).catch(err => console.error(\"Error updating chat metadata:\", err));\r\n\r\n                setSelectedChat({\r\n                    ...existingChat,\r\n                    participantNames: sortedNames,\r\n                    participantPhotos: sortedPhotos\r\n                });\r\n            } else {\r\n                setSelectedChat({\r\n                    id: chatId,\r\n                    participants: participants,\r\n                    participantEmails: sortedEmails,\r\n                    participantNames: sortedNames,\r\n                    participantPhotos: sortedPhotos,\r\n                    listingData: location.state?.listingData || null,\r\n                    isNew: true\r\n                });\r\n            }\r\n        }\r\n    }, [location.state, chats, currentUser]);\r\n\r\n    // Listen for Messages in selected chat\r\n    useEffect(() => {\r\n        if (!selectedChat || selectedChat.isNew) {\r\n            if (selectedChat?.isNew) setMessages([]);\r\n            return;\r\n        }\r\n\r\n        const q = query(\r\n            collection(db, \"chats\", selectedChat.id, \"messages\"),\r\n            orderBy(\"timestamp\", \"asc\")\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const msgs = snapshot.docs.map(doc => doc.data());\r\n            setMessages(msgs);\r\n            setTimeout(scrollToBottom, 50);\r\n        });\r\n\r\n        // Clear unread count\r\n        const chatRef = doc(db, \"chats\", selectedChat.id);\r\n        updateDoc(chatRef, {\r\n            [`unreadCounts.${currentUser.uid}`]: 0\r\n        }).catch(() => {});\r\n\r\n        return unsubscribe;\r\n    }, [selectedChat, currentUser.uid]);\r\n\r\n    // Listen for Presence of target user\r\n    useEffect(() => {\r\n        if (!selectedChat) return;\r\n\r\n        const targetUid = selectedChat.participants.find(p => p !== currentUser.uid);\r\n        if (!targetUid) return;\r\n\r\n        const unsubscribe = onSnapshot(doc(db, \"users\", targetUid), (doc) => {\r\n            if (doc.exists()) {\r\n                setTargetUserStatus(doc.data());\r\n            }\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, [selectedChat, currentUser.uid]);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    const sendMessage = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !selectedChat) return;\r\n\r\n        const chatDocRef = doc(db, \"chats\", selectedChat.id);\r\n        const text = newMessage;\r\n        setNewMessage(\"\");\r\n\r\n        try {\r\n            if (selectedChat.isNew) {\r\n                await setDoc(chatDocRef, {\r\n                    participants: selectedChat.participants,\r\n                    participantEmails: selectedChat.participantEmails,\r\n                    participantNames: selectedChat.participantNames,\r\n                    participantPhotos: selectedChat.participantPhotos,\r\n                    unreadCounts: {\r\n                        [selectedChat.participants[0]]: 0,\r\n                        [selectedChat.participants[1]]: 0\r\n                    },\r\n                    createdAt: serverTimestamp(),\r\n                    lastMessage: text,\r\n                    lastMessageSenderId: currentUser.uid,\r\n                    lastMessageTimestamp: serverTimestamp()\r\n                });\r\n\r\n                const otherUser = selectedChat.participants.find(p => p !== currentUser.uid);\r\n                await updateDoc(chatDocRef, {\r\n                    [`unreadCounts.${otherUser}`]: increment(1)\r\n                });\r\n\r\n                setSelectedChat(prev => ({ ...prev, isNew: false }));\r\n            } else {\r\n                await updateDoc(chatDocRef, {\r\n                    lastMessage: text,\r\n                    lastMessageSenderId: currentUser.uid,\r\n                    lastMessageTimestamp: serverTimestamp(),\r\n                    [`unreadCounts.${selectedChat.participants.find(p => p !== currentUser.uid)}`]: increment(1)\r\n                });\r\n            }\r\n\r\n            await addDoc(collection(db, \"chats\", selectedChat.id, \"messages\"), {\r\n                text: text,\r\n                senderId: currentUser.uid,\r\n                timestamp: serverTimestamp()\r\n            });\r\n\r\n            scrollToBottom();\r\n        } catch (error) {\r\n            console.error(\"Error sending message:\", error);\r\n        }\r\n    };\r\n\r\n    const getOtherName = (chat) => {\r\n        if (!chat) return \"Unknown\";\r\n        const myIndex = chat.participants.indexOf(currentUser.uid);\r\n        return chat.participantNames?.[1 - myIndex] || chat.participantEmails?.find(e => e !== currentUser.email) || \"User\";\r\n    };\r\n\r\n    const getOtherPhoto = (chat) => {\r\n        if (!chat) return null;\r\n        const myIndex = chat.participants.indexOf(currentUser.uid);\r\n        return chat.participantPhotos?.[1 - myIndex];\r\n    };\r\n\r\n    const getStatusText = () => {\r\n        if (!targetUserStatus?.lastSeen) return \"Offline\";\r\n        const lastSeen = targetUserStatus.lastSeen.toDate();\r\n        const diffMinutes = (new Date() - lastSeen) / 60000;\r\n\r\n        if (diffMinutes < 5) return \"Online\";\r\n        if (diffMinutes < 60) return `Last seen ${Math.floor(diffMinutes)}m ago`;\r\n        if (diffMinutes < 1440) return `Last seen ${Math.floor(diffMinutes / 60)}h ago`;\r\n        return `Last seen ${lastSeen.toLocaleDateString()}`;\r\n    };\r\n\r\n    const isOnline = targetUserStatus?.lastSeen && (new Date() - targetUserStatus.lastSeen.toDate()) / 60000 < 5;\r\n\r\n    const startCall = (type) => {\r\n        if (!selectedChat) return;\r\n        setCallType(type);\r\n        setInCall(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-[calc(100vh-140px)] bg-white dark:bg-gray-900 rounded-3xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-800 transition-colors duration-300\">\r\n            {/* Sidebar List */}\r\n            <div className={`w-full md:w-96 border-r border-gray-100 dark:border-gray-800 flex flex-col bg-gray-50/50 dark:bg-gray-950/50 ${selectedChat ? 'hidden md:flex' : 'flex'}`}>\r\n                <div className=\"p-6 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900\">\r\n                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Messages</h2>\r\n                </div>\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\r\n                    {chats.length === 0 ? (\r\n                        <div className=\"text-center py-10 text-gray-500 dark:text-gray-400 flex flex-col items-center\">\r\n                            <MessageCircle className=\"mb-2 text-gray-300 dark:text-gray-700\" size={40} />\r\n                            <p>No conversations yet.</p>\r\n                        </div>\r\n                    ) : (\r\n                        chats.map(chat => (\r\n                            <button\r\n                                key={chat.id}\r\n                                onClick={() => setSelectedChat(chat)}\r\n                                className={`w-full p-4 rounded-xl text-left transition-all duration-200 group relative ${selectedChat?.id === chat.id\r\n                                    ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30'\r\n                                    : 'bg-white dark:bg-gray-900 hover:bg-white dark:hover:bg-gray-800 hover:shadow-md border border-transparent hover:border-gray-100 dark:hover:border-gray-700 text-gray-900 dark:text-gray-100'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex items-center gap-3 mb-1\">\r\n                                    <div className=\"w-8 h-8 rounded-full flex-shrink-0 overflow-hidden bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700\">\r\n                                        {getOtherPhoto(chat) ? (\r\n                                            <img src={getOtherPhoto(chat)} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                        ) : (\r\n                                            <div className=\"w-full h-full flex items-center justify-center text-xs font-bold bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\">\r\n                                                {getOtherName(chat)[0]?.toUpperCase()}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <h3 className={`font-bold text-sm flex justify-between items-center ${selectedChat?.id === chat.id ? 'text-white' : 'text-gray-900 dark:text-white'}`}>\r\n                                            <span className=\"truncate\">{getOtherName(chat)}</span>\r\n                                            {chat.unreadCounts && chat.unreadCounts[currentUser.uid] > 0 && (\r\n                                                <span className=\"flex-shrink-0 ml-2 w-2 h-2 bg-red-500 rounded-full\"></span>\r\n                                            )}\r\n                                        </h3>\r\n                                    </div>\r\n                                </div>\r\n                                <p className={`text-xs truncate opacity-80 ${selectedChat?.id === chat.id ? 'text-blue-100' : (chat.unreadCounts && chat.unreadCounts[currentUser.uid] > 0 ? 'text-gray-900 dark:text-white font-bold' : 'text-gray-500 dark:text-gray-400')}`}>\r\n                                    {chat.lastMessageSenderId === currentUser.uid ? 'You: ' : ''}{chat.lastMessage}\r\n                                </p>\r\n                            </button>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chat Area */}\r\n            <div className={`flex-1 flex flex-col bg-white dark:bg-gray-900 ${!selectedChat ? 'hidden md:flex' : 'flex'}`}>\r\n                {selectedChat ? (\r\n                    <>\r\n                        <div className=\"p-4 border-b border-gray-100 dark:border-gray-800 flex items-center gap-4 bg-white/80 dark:bg-gray-900/80 backdrop-blur z-10\">\r\n                            <button className=\"md:hidden p-2 -ml-2 text-gray-600 dark:text-gray-400\" onClick={() => setSelectedChat(null)}>\r\n                                <ArrowLeft size={20} />\r\n                            </button>\r\n                            <div className=\"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center overflow-hidden border border-gray-100 dark:border-gray-800\">\r\n                                {getOtherPhoto(selectedChat) ? (\r\n                                    <img src={getOtherPhoto(selectedChat)} alt={getOtherName(selectedChat)} className=\"w-full h-full object-cover\" />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold\">\r\n                                        {getOtherName(selectedChat)[0]?.toUpperCase()}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"font-bold text-gray-900 dark:text-white\">{getOtherName(selectedChat)}</h3>\r\n                                <p className={`text-xs font-medium flex items-center gap-1 ${isOnline ? 'text-green-600 dark:text-green-400' : 'text-gray-500 dark:text-gray-400'}`}>\r\n                                    <span className={`w-1.5 h-1.5 rounded-full ${isOnline ? 'bg-green-500 animate-pulse' : 'bg-gray-400 dark:bg-gray-600'}`}></span>\r\n                                    {getStatusText()}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 ml-auto\">\r\n                                <button\r\n                                    onClick={() => startCall('audio')}\r\n                                    className=\"p-2.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors\"\r\n                                >\r\n                                    <Phone size={20} />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => startCall('video')}\r\n                                    className=\"p-2.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors\"\r\n                                >\r\n                                    <Video size={20} />\r\n                                </button>\r\n                                <button className=\"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\">\r\n                                    <MoreVertical size={20} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50 dark:bg-gray-950/50\">\r\n                            {selectedChat.listingData && (\r\n                                <div className=\"flex justify-center mb-6\">\r\n                                    <div className=\"bg-white dark:bg-gray-900 p-3 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 flex items-center gap-4 max-w-sm\">\r\n                                        <img src={selectedChat.listingData.image} alt=\"\" className=\"w-16 h-16 rounded-lg object-cover\" />\r\n                                        <div>\r\n                                            <p className=\"text-xs text-blue-600 font-bold uppercase tracking-wider mb-0.5\">Inquiry about</p>\r\n                                            <h4 className=\"font-bold text-gray-900 dark:text-white line-clamp-1\">{selectedChat.listingData.title}</h4>\r\n                                            <p className=\"text-sm font-medium text-gray-500\">${selectedChat.listingData.price}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            {messages.map((msg, index) => {\r\n                                const isMe = msg.senderId === currentUser.uid;\r\n                                return (\r\n                                    <div key={index} className={`flex ${msg.isSystemMessage ? 'justify-center my-4' : (isMe ? 'justify-end' : 'justify-start')}`}>\r\n                                        {msg.isSystemMessage ? (\r\n                                            <span className=\"text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full\">\r\n                                                {msg.text}\r\n                                            </span>\r\n                                        ) : (\r\n                                            <div className={`max-w-[75%] px-6 py-3 rounded-2xl shadow-sm text-sm ${isMe\r\n                                                ? 'bg-blue-600 text-white rounded-tr-none'\r\n                                                : 'bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-100 dark:border-gray-700 rounded-tl-none'\r\n                                                }`}>\r\n                                                {msg.text}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        <form onSubmit={sendMessage} className=\"p-4 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800\">\r\n                            <div className=\"flex gap-2 items-center bg-gray-50 dark:bg-gray-800 rounded-full px-2 py-2 border border-gray-200 dark:border-gray-700\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newMessage}\r\n                                    onChange={(e) => setNewMessage(e.target.value)}\r\n                                    placeholder=\"Type your message...\"\r\n                                    className=\"flex-1 bg-transparent border-none px-4 py-2 focus:ring-0 text-sm text-gray-900 dark:text-white\"\r\n                                />\r\n                                <button type=\"submit\" disabled={!newMessage.trim()} className=\"bg-blue-600 text-white rounded-full p-2 h-10 w-10 flex items-center justify-center disabled:opacity-50\">\r\n                                    <Send size={18} />\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 bg-slate-50/50 dark:bg-gray-950/20 font-medium\">\r\n                        <MessageCircle size={48} className=\"mb-2 opacity-20\" />\r\n                        <p>Pick a conversation to start chatting</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\CreateListing.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[482,521],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { db } from '../firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport ImageUpload from '../components/ImageUpload';\r\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap, LayersControl } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport { motion } from 'framer-motion';\r\nimport { DollarSign, Tag, Image as ImageIcon, MapPin, AlignLeft, Type, Loader, Crosshair } from 'lucide-react';\r\n\r\n// Fix Leaflet marker icon issue\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n\r\n// Component to programmatically move map\r\nfunction RecenterAutomatically({ lat, lng }) {\r\n    const map = useMap();\r\n    useEffect(() => {\r\n        if (lat && lng) {\r\n            map.flyTo([lat, lng], 13);\r\n        }\r\n    }, [lat, lng, map]);\r\n    return null;\r\n}\r\n\r\nexport default function CreateListing() {\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [locating, setLocating] = useState(false);\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: \"\",\r\n        description: \"\",\r\n        price: \"\",\r\n        category: \"General\",\r\n    });\r\n    const [imageUrls, setImageUrls] = useState([]);\r\n    const [location, setLocation] = useState(null); // { lat, lng }\r\n    const [address, setAddress] = useState(\"\");\r\n\r\n    // Default center (e.g., London)\r\n    const [mapCenter, setMapCenter] = useState([51.505, -0.09]);\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const fetchAddress = async (lat, lng) => {\r\n        try {\r\n            const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`);\r\n            const data = await response.json();\r\n            if (data && data.display_name) {\r\n                setAddress(data.display_name);\r\n            } else {\r\n                setAddress(\"Address not found\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching address:\", error);\r\n            setAddress(\"Error fetching address\");\r\n        }\r\n    };\r\n\r\n    function LocationMarker({ position, setPosition }) {\r\n        useMapEvents({\r\n            click(e) {\r\n                setPosition(e.latlng);\r\n                fetchAddress(e.latlng.lat, e.latlng.lng);\r\n            },\r\n        });\r\n\r\n        return position === null ? null : (\r\n            <Marker position={position}></Marker>\r\n        );\r\n    }\r\n\r\n    const handleUseCurrentLocation = () => {\r\n        if (!navigator.geolocation) {\r\n            setError(\"Geolocation is not supported by your browser.\");\r\n            return;\r\n        }\r\n\r\n        setLocating(true);\r\n        navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n                const { latitude, longitude } = position.coords;\r\n                setLocation({ lat: latitude, lng: longitude });\r\n                setMapCenter([latitude, longitude]);\r\n                fetchAddress(latitude, longitude);\r\n                setLocating(false);\r\n            },\r\n            (err) => {\r\n                console.error(err);\r\n                setError(\"Unable to retrieve your location. Please check your permissions.\");\r\n                setLocating(false);\r\n            }\r\n        );\r\n    };\r\n\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // Validation for Minimum 3 Images\r\n        if (imageUrls.length < 3) {\r\n            return setError(`Please upload at least 3 images. You have only uploaded ${imageUrls.length}.`);\r\n        }\r\n\r\n        if (!location) return setError(\"Please select a location on the map.\");\r\n\r\n        setLoading(true);\r\n        setError(\"\");\r\n\r\n        try {\r\n            await addDoc(collection(db, \"listings\"), {\r\n                ...formData,\r\n                price: Number(formData.price),\r\n                imageUrls,\r\n                imageUrl: imageUrls[0],\r\n                location: { lat: location.lat, lng: location.lng },\r\n                address: address,\r\n                userId: currentUser.uid,\r\n                userEmail: currentUser.email,\r\n                userDisplayName: currentUser.displayName || currentUser.email.split('@')[0], // Save display name\r\n                userPhotoURL: currentUser.photoURL || null, // Save profile picture\r\n                createdAt: serverTimestamp(),\r\n            });\r\n            navigate(\"/\");\r\n        } catch (err) {\r\n            console.error(\"Error adding document: \", err);\r\n            setError(\"Failed to create listing.\");\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto\">\r\n            <div className=\"mb-6\">\r\n                <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Sell an Item</h1>\r\n                <p className=\"text-gray-500 dark:text-gray-400\">Reach buyers in your community.</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                {/* Form Section */}\r\n                <div className=\"flex-1 space-y-6\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 space-y-4 transition-colors\"\r\n                    >\r\n                        <div>\r\n                            <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300 mb-2\">\r\n                                <Type size={16} /> Title\r\n                            </label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"title\"\r\n                                required\r\n                                className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white\"\r\n                                placeholder=\"What are you selling?\"\r\n                                value={formData.title}\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300 mb-2\">\r\n                                <AlignLeft size={16} /> Description\r\n                            </label>\r\n                            <textarea\r\n                                name=\"description\"\r\n                                required\r\n                                rows=\"4\"\r\n                                className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-none text-gray-900 dark:text-white\"\r\n                                placeholder=\"Describe the condition, features, etc...\"\r\n                                value={formData.description}\r\n                                onChange={handleChange}\r\n                            ></textarea>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300 mb-2\">\r\n                                    Γéª Price\r\n                                </label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"price\"\r\n                                    required\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                    className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white\"\r\n                                    placeholder=\"0.00\"\r\n                                    value={formData.price}\r\n                                    onChange={handleChange}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300 mb-2\">\r\n                                    <Tag size={16} /> Category\r\n                                </label>\r\n                                <select\r\n                                    name=\"category\"\r\n                                    className=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white\"\r\n                                    value={formData.category}\r\n                                    onChange={handleChange}\r\n                                >\r\n                                    {[\"General\", \"Electronics\", \"Furniture\", \"Clothing\", \"Vehicles\", \"Books\", \"Services\", \"Other\"].map(opt => (\r\n                                        <option key={opt} value={opt} className=\"bg-white dark:bg-gray-900\">{opt}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.1 }}\r\n                        className=\"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 transition-colors\"\r\n                    >\r\n                        <div className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300 mb-4\">\r\n                            <ImageIcon size={16} /> Photos\r\n                        </div>\r\n                        <ImageUpload onUploadComplete={setImageUrls} />\r\n                    </motion.div>\r\n                </div>\r\n\r\n                {/* Map Section */}\r\n                <div className=\"w-full lg:w-1/3 space-y-6\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: 10 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: 0.2 }}\r\n                        className=\"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 h-96 flex flex-col transition-colors\"\r\n                    >\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <div className=\"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300\">\r\n                                <MapPin size={16} /> Location\r\n                            </div>\r\n                            <button\r\n                                onClick={handleUseCurrentLocation}\r\n                                disabled={locating}\r\n                                type=\"button\"\r\n                                className=\"text-xs flex items-center gap-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-1 rounded-md font-bold hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors disabled:opacity-50\"\r\n                            >\r\n                                {locating ? <Loader size={12} className=\"animate-spin\" /> : <Crosshair size={12} />}\r\n                                Use Current Location\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 relative z-0\">\r\n                            <MapContainer center={mapCenter} zoom={13} style={{ height: '100%', width: '100%' }}>\r\n                                <LayersControl position=\"topright\">\r\n                                    <LayersControl.BaseLayer checked name=\"Satellite (Realistic)\">\r\n                                        <TileLayer\r\n                                            url=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n                                            attribution='Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'\r\n                                        />\r\n                                    </LayersControl.BaseLayer>\r\n                                    <LayersControl.BaseLayer name=\"Street Map\">\r\n                                        <TileLayer\r\n                                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                                        />\r\n                                    </LayersControl.BaseLayer>\r\n                                </LayersControl>\r\n                                <LocationMarker position={location} setPosition={setLocation} />\r\n                                <RecenterAutomatically lat={location?.lat} lng={location?.lng} />\r\n                            </MapContainer>\r\n                            {location && (\r\n                                <div className=\"absolute bottom-2 left-2 right-2 bg-white/95 dark:bg-gray-900/95 backdrop-blur px-4 py-3 rounded-xl text-xs shadow-2xl border border-gray-200 dark:border-gray-700 z-[1000] space-y-2 transition-all\">\r\n                                    <div className=\"flex justify-between items-center mb-1\">\r\n                                        <div className=\"flex items-center gap-1.5 font-mono text-gray-500 dark:text-gray-400\">\r\n                                            <div className=\"w-1.5 h-1.5 bg-blue-500 rounded-full\"></div>\r\n                                            {location.lat.toFixed(4)}, {location.lng.toFixed(4)}\r\n                                        </div>\r\n                                        <span className=\"text-green-600 dark:text-green-400 font-bold flex items-center gap-1\">\r\n                                            <div className=\"w-1.5 h-1.5 bg-green-500 dark:bg-green-400 rounded-full animate-pulse\"></div>\r\n                                            Pinned\r\n                                        </span>\r\n                                    </div>\r\n                                    {address && (\r\n                                        <p className=\"text-gray-900 dark:text-white font-medium leading-relaxed border-t border-gray-100 dark:border-gray-800 pt-2\">\r\n                                            {address}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    {error && <div className=\"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-xl text-sm font-medium border border-red-100 dark:border-red-900/30\">{error}</div>}\r\n\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={loading}\r\n                        className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:shadow-lg hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                    >\r\n                        {loading && <Loader className=\"animate-spin\" size={20} />}\r\n                        {loading ? \"Publishing...\" : \"Publish Listing\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\ForgotPassword.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[143,182],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Mail, ArrowRight, Loader, CheckCircle, ArrowLeft } from \"lucide-react\";\r\n\r\nexport default function ForgotPassword() {\r\n    const emailRef = useRef();\r\n    const { resetPassword } = useAuth();\r\n    const [error, setError] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setMessage(\"\");\r\n            setError(\"\");\r\n            setLoading(true);\r\n            await resetPassword(emailRef.current.value);\r\n            setMessage(\"Check your inbox for further instructions\");\r\n        } catch {\r\n            setError(\"Failed to reset password. Please check your email and try again.\");\r\n        }\r\n\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-gray-50 overflow-hidden\">\r\n            {/* Visual Side */}\r\n            <motion.div\r\n                initial={{ x: -100, opacity: 0 }}\r\n                animate={{ x: 0, opacity: 1 }}\r\n                transition={{ duration: 0.6 }}\r\n                className=\"hidden lg:flex lg:w-1/2 bg-gray-900 relative items-center justify-center p-12 text-white overflow-hidden\"\r\n            >\r\n                <div className=\"absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-500 via-blue-500 to-gray-900 animate-pulse\"></div>\r\n                <div className=\"z-10 relative max-w-lg\">\r\n                    <h1 className=\"text-5xl font-extrabold mb-6 tracking-tight\">Recover Access.</h1>\r\n                    <p className=\"text-xl text-gray-300 leading-relaxed\">\r\n                        Don't worry, it happens to the best of us. We'll get you back into your account in no time.\r\n                    </p>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Form Side */}\r\n            <div className=\"flex-1 flex items-center justify-center p-4 lg:p-12 relative\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 30 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.2, duration: 0.5 }}\r\n                    className=\"w-full max-w-md bg-white rounded-3xl shadow-xl shadow-gray-200/50 p-8 border border-gray-100\"\r\n                >\r\n                    <div className=\"text-center mb-10\">\r\n                        <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Forgot Password?</h2>\r\n                        <p className=\"text-gray-500\">Enter your email to reset your password.</p>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            className=\"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm font-medium mb-6 flex items-center gap-2 border border-red-100\"\r\n                        >\r\n                            <span className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></span>\r\n                            {error}\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {message && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            className=\"bg-green-50 text-green-600 px-4 py-3 rounded-xl text-sm font-medium mb-6 flex items-center gap-2 border border-green-100\"\r\n                        >\r\n                            <CheckCircle size={16} />\r\n                            {message}\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Email</label>\r\n                            <div className=\"relative\">\r\n                                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={emailRef}\r\n                                    type=\"email\"\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"you@example.com\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 group\"\r\n                        >\r\n                            {loading ? <Loader className=\"animate-spin\" size={20} /> : (\r\n                                <>\r\n                                    Reset Password <ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 text-center\">\r\n                        <Link to=\"/login\" className=\"inline-flex items-center gap-2 font-bold text-gray-600 hover:text-gray-900 transition-colors\">\r\n                            <ArrowLeft size={16} /> Back to Login\r\n                        </Link>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\Home.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[259,298],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[451,485],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Link } from 'react-router-dom';\r\nimport { db } from '../firebase';\r\nimport { collection, query, orderBy, onSnapshot } from 'firebase/firestore';\r\nimport { motion } from 'framer-motion';\r\nimport { Search, MapPin, Tag } from 'lucide-react';\r\nimport CategoryPills from '../components/CategoryPills';\r\n\r\nexport default function Home() {\r\n    const { currentUser } = useAuth();\r\n    const [listings, setListings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n\r\n    useEffect(() => {\r\n        const q = query(collection(db, \"listings\"), orderBy(\"createdAt\", \"desc\"));\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const listingsData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setListings(listingsData);\r\n            setLoading(false);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, []);\r\n\r\n    const filteredListings = listings.filter(listing => {\r\n        const matchesSearch = listing.title.toLowerCase().includes(searchTerm.toLowerCase());\r\n        const matchesCategory = selectedCategory === \"All\" || listing.category === selectedCategory;\r\n        return matchesSearch && matchesCategory;\r\n    });\r\n\r\n    const container = {\r\n        hidden: { opacity: 0 },\r\n        show: {\r\n            opacity: 1,\r\n            transition: { staggerChildren: 0.1 }\r\n        }\r\n    };\r\n\r\n    const item = {\r\n        hidden: { opacity: 0, y: 20 },\r\n        show: { opacity: 1, y: 0 }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Hero / Header Section */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white tracking-tight\">Discover</h1>\r\n                    <p className=\"text-gray-500 dark:text-gray-400 mt-1\">Found {filteredListings.length} items near you</p>\r\n                </div>\r\n\r\n                {/* Search Bar */}\r\n                <div className=\"relative w-full md:w-96\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search for items...\"\r\n                        className=\"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 shadow-sm transition-all text-gray-900 dark:text-white\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <CategoryPills selected={selectedCategory} onSelect={setSelectedCategory} />\r\n\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    {[1, 2, 3, 4].map(i => (\r\n                        <div key={i} className=\"bg-gray-100 dark:bg-gray-800 rounded-2xl h-64 animate-pulse\"></div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <motion.div\r\n                    key={selectedCategory + searchTerm} // Force re-animation on filter change\r\n                    variants={container}\r\n                    initial=\"hidden\"\r\n                    animate=\"show\"\r\n                    className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\"\r\n                >\r\n                    {filteredListings.length === 0 ? (\r\n                        <div className=\"col-span-full py-20 text-center\">\r\n                            <div className=\"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <Search className=\"text-gray-400 dark:text-gray-500\" size={40} />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">No items found</h3>\r\n                            <p className=\"text-gray-500 dark:text-gray-400 mt-1\">Try adjusting your search or category.</p>\r\n                        </div>\r\n                    ) : (\r\n                        filteredListings.map(listing => (\r\n                            <motion.div key={listing.id} variants={item}>\r\n                                <Link to={`/listing/${listing.id}`} className=\"group block bg-white dark:bg-gray-900 rounded-2xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-gray-800 overflow-hidden h-full flex flex-col\">\r\n                                    <div className=\"relative aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-800\">\r\n                                        <img\r\n                                            src={listing.imageUrl}\r\n                                            alt={listing.title}\r\n                                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                                        />\r\n                                        <div className=\"absolute top-3 right-3\">\r\n                                            <span className=\"bg-white/90 dark:bg-gray-900/90 backdrop-blur text-xs font-bold px-2 py-1 rounded-lg shadow-sm dark:text-white\">\r\n                                                {listing.category}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"p-4 flex flex-col flex-1\">\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"flex justify-between items-start gap-2 mb-2\">\r\n                                                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors line-clamp-1\">{listing.title}</h3>\r\n                                                <p className=\"text-blue-600 dark:text-blue-400 font-bold whitespace-nowrap\">Γéª{listing.price}</p>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4\">{listing.description}</p>\r\n                                        </div>\r\n                                        <div className=\"pt-4 border-t border-gray-100 dark:border-gray-800 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n                                            <div className=\"flex items-center gap-1 min-w-0 flex-1\">\r\n                                                <MapPin size={14} className=\"text-blue-500 flex-shrink-0\" />\r\n                                                <span className=\"truncate\">{listing.address || (listing.location ? 'Map Available' : 'No Location')}</span>\r\n                                            </div>\r\n                                            <span className=\"ml-2 flex-shrink-0\">{new Date(listing.createdAt?.seconds * 1000).toLocaleDateString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            </motion.div>\r\n                        ))\r\n                    )}\r\n                </motion.div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\ListingDetail.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[413,420],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { db } from '../firebase';\r\nimport { doc, getDoc, deleteDoc } from 'firebase/firestore';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { MapContainer, TileLayer, Marker, LayersControl } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { MessageCircle, Trash2, ArrowLeft, MapPin, Calendar, ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\r\n    shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41]\r\n});\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nexport default function ListingDetail() {\r\n    const { id } = useParams();\r\n    const { currentUser } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [listing, setListing] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n    useEffect(() => {\r\n        async function fetchListing() {\r\n            const docRef = doc(db, \"listings\", id);\r\n            const docSnap = await getDoc(docRef);\r\n\r\n            if (docSnap.exists()) {\r\n                const data = docSnap.data();\r\n                let images = [];\r\n                if (data.imageUrls && Array.isArray(data.imageUrls)) {\r\n                    images = data.imageUrls;\r\n                } else if (data.imageUrl) {\r\n                    images = [data.imageUrl];\r\n                }\r\n\r\n                setListing({ id: docSnap.id, ...data, images });\r\n            }\r\n            setLoading(false);\r\n        }\r\n        fetchListing();\r\n    }, [id]);\r\n\r\n    const handleStartChat = () => {\r\n        if (listing.userId === currentUser.uid) return;\r\n        navigate('/chat', {\r\n            state: {\r\n                targetUser: {\r\n                    uid: listing.userId,\r\n                    email: listing.userEmail,\r\n                    displayName: listing.userDisplayName || listing.userEmail.split('@')[0]\r\n                },\r\n                listingId: listing.id\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (window.confirm(\"Are you sure you want to delete this listing?\")) {\r\n            await deleteDoc(doc(db, \"listings\", id));\r\n            navigate(\"/\");\r\n        }\r\n    };\r\n\r\n    const nextImage = () => {\r\n        if (!listing?.images) return;\r\n        setCurrentImageIndex((prev) => (prev + 1) % listing.images.length);\r\n    };\r\n\r\n    const prevImage = () => {\r\n        if (!listing?.images) return;\r\n        setCurrentImageIndex((prev) => (prev - 1 + listing.images.length) % listing.images.length);\r\n    };\r\n\r\n    if (loading) return <div className=\"h-96 flex items-center justify-center\"><div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div></div>;\r\n    if (!listing) return <div className=\"h-96 flex items-center justify-center text-gray-500\">Listing not found</div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto\">\r\n            <button onClick={() => navigate(-1)} className=\"mb-6 flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors font-medium\">\r\n                <ArrowLeft size={20} /> Back to Browse\r\n            </button>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                {/* Image Section - Carousel */}\r\n                <div className=\"space-y-4\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        className=\"rounded-3xl overflow-hidden bg-gray-100 dark:bg-gray-800 shadow-xl shadow-gray-200/50 dark:shadow-none aspect-[4/3] lg:aspect-auto lg:h-[500px] relative group\"\r\n                    >\r\n                        <AnimatePresence mode='wait'>\r\n                            <motion.img\r\n                                key={currentImageIndex}\r\n                                src={listing.images[currentImageIndex]}\r\n                                alt={listing.title}\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"w-full h-full object-cover\"\r\n                            />\r\n                        </AnimatePresence>\r\n\r\n                        <div className=\"absolute top-4 left-4 z-10\">\r\n                            <span className=\"bg-white/90 dark:bg-gray-900/90 backdrop-blur px-4 py-2 rounded-full font-bold shadow-sm text-gray-900 dark:text-white\">\r\n                                {listing.category}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Navigation Buttons */}\r\n                        {listing.images.length > 1 && (\r\n                            <>\r\n                                <button\r\n                                    onClick={prevImage}\r\n                                    className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-700 p-2 rounded-full shadow-lg backdrop-blur transition-all opacity-0 group-hover:opacity-100 text-gray-900 dark:text-white\"\r\n                                >\r\n                                    <ChevronLeft size={24} />\r\n                                </button>\r\n                                <button\r\n                                    onClick={nextImage}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-700 p-2 rounded-full shadow-lg backdrop-blur transition-all opacity-0 group-hover:opacity-100 text-gray-900 dark:text-white\"\r\n                                >\r\n                                    <ChevronRight size={24} />\r\n                                </button>\r\n\r\n                                {/* Dots Indicator */}\r\n                                <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2\">\r\n                                    {listing.images.map((_, idx) => (\r\n                                        <button\r\n                                            key={idx}\r\n                                            onClick={() => setCurrentImageIndex(idx)}\r\n                                            className={`w-2 h-2 rounded-full transition-all ${idx === currentImageIndex ? \"bg-white w-6\" : \"bg-white/50 hover:bg-white/75\"\r\n                                                }`}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </motion.div>\r\n\r\n                    {/* Thumbnails */}\r\n                    {listing.images.length > 1 && (\r\n                        <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\r\n                            {listing.images.map((img, idx) => (\r\n                                <button\r\n                                    key={idx}\r\n                                    onClick={() => setCurrentImageIndex(idx)}\r\n                                    className={`flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-2 transition-all ${idx === currentImageIndex ? \"border-blue-600 ring-2 ring-blue-600/20\" : \"border-transparent hover:border-gray-300 dark:hover:border-gray-600\"\r\n                                        }`}\r\n                                >\r\n                                    <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Info Section */}\r\n                <motion.div\r\n                    initial={{ opacity: 0, x: 20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: 0.1 }}\r\n                    className=\"flex flex-col h-full space-y-6\"\r\n                >\r\n                    <div className=\"bg-white dark:bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 flex-1 transition-colors\">\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                            <span className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1\">\r\n                                <Calendar size={14} /> Posted {new Date(listing.createdAt?.seconds * 1000).toLocaleDateString()}\r\n                            </span>\r\n                            {listing.location && (\r\n                                <div className=\"text-sm text-blue-600 dark:text-blue-400 flex flex-col items-end gap-1 font-medium\">\r\n                                    <span className=\"bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full flex items-center gap-1\">\r\n                                        <MapPin size={14} /> {listing.address ? \"Location Verified\" : \"Nearby\"}\r\n                                    </span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <h1 className=\"text-4xl font-extrabold text-gray-900 dark:text-white mb-2 leading-tight\">{listing.title}</h1>\r\n\r\n                        {listing.address && (\r\n                            <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-4 flex items-start gap-2\">\r\n                                <MapPin size={16} className=\"mt-0.5 flex-shrink-0 text-blue-500\" />\r\n                                <span>{listing.address}</span>\r\n                            </p>\r\n                        )}\r\n\r\n                        <p className=\"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 mb-6\">\r\n                            Γéª{listing.price}\r\n                        </p>\r\n\r\n                        <div className=\"prose prose-gray dark:prose-invert max-w-none mb-8 text-gray-600 dark:text-gray-300 leading-relaxed transition-colors\">\r\n                            {listing.description}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-4 py-6 border-t border-b border-gray-100 dark:border-gray-800 mb-8 transition-colors\">\r\n                            <div className=\"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center text-xl overflow-hidden border border-gray-200 dark:border-gray-700\">\r\n                                {listing.userPhotoURL ? (\r\n                                    <img src={listing.userPhotoURL} alt=\"Seller\" className=\"w-full h-full object-cover\" />\r\n                                ) : (\r\n                                    <span className=\"font-bold text-gray-500 dark:text-gray-400\">{(listing.userDisplayName || listing.userEmail || \"?\").charAt(0).toUpperCase()}</span>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400\">Seller</p>\r\n                                <p className=\"font-bold text-gray-900 dark:text-white\">{listing.userDisplayName || listing.userEmail?.split('@')[0]}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-4\">\r\n                            {currentUser.uid !== listing.userId ? (\r\n                                <button\r\n                                    onClick={handleStartChat}\r\n                                    className=\"flex-1 bg-gray-900 dark:bg-blue-600 text-white font-bold py-4 px-6 rounded-2xl hover:bg-black dark:hover:bg-blue-700 transition-all shadow-lg shadow-gray-900/20 dark:shadow-blue-500/20 flex items-center justify-center gap-2 transform active:scale-95\"\r\n                                >\r\n                                    <MessageCircle size={20} />\r\n                                    Chat with Seller\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={handleDelete}\r\n                                    className=\"flex-1 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 font-bold py-4 px-6 rounded-2xl hover:bg-red-100 dark:hover:bg-red-900/30 transition-all flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <Trash2 size={20} />\r\n                                    Delete Listing\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Map Preview */}\r\n                    <div className=\"h-64 bg-white dark:bg-gray-900 p-2 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm relative overflow-hidden transition-colors\">\r\n                        {listing.location ? (\r\n                            <MapContainer\r\n                                center={[listing.location.lat, listing.location.lng]}\r\n                                zoom={13}\r\n                                style={{ height: '100%', width: '100%', borderRadius: '1.5rem' }}\r\n                                dragging={false}\r\n                                scrollWheelZoom={false}\r\n                                zoomControl={false}\r\n                            >\r\n                                <LayersControl position=\"topright\">\r\n                                    <LayersControl.BaseLayer checked name=\"Satellite\">\r\n                                        <TileLayer\r\n                                            url=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n                                            attribution='Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'\r\n                                        />\r\n                                    </LayersControl.BaseLayer>\r\n                                    <LayersControl.BaseLayer name=\"Street\">\r\n                                        <TileLayer\r\n                                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                                        />\r\n                                    </LayersControl.BaseLayer>\r\n                                </LayersControl>\r\n                                <Marker position={[listing.location.lat, listing.location.lng]}></Marker>\r\n                            </MapContainer>\r\n                        ) : (\r\n                            <div className=\"flex items-center justify-center h-full text-gray-400 dark:text-gray-600 font-medium\">No Location Data</div>\r\n                        )}\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\Login.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[156,195],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Mail, Lock, ArrowRight, Loader, Eye, EyeOff } from \"lucide-react\";\r\n\r\nexport default function Login() {\r\n    const emailRef = useRef();\r\n    const passwordRef = useRef();\r\n    const { login } = useAuth();\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setError(\"\");\r\n            setLoading(true);\r\n            await login(emailRef.current.value, passwordRef.current.value);\r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            console.error(\"Login error:\", error);\r\n            setError(\"Failed to sign in. Please check your credentials.\");\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-gray-50 dark:bg-gray-950 transition-colors duration-300 overflow-hidden\">\r\n            {/* Visual Side */}\r\n            <motion.div\r\n                initial={{ x: -100, opacity: 0 }}\r\n                animate={{ x: 0, opacity: 1 }}\r\n                transition={{ duration: 0.6 }}\r\n                className=\"hidden lg:flex lg:w-1/2 bg-gray-900 relative items-center justify-center p-12 text-white overflow-hidden\"\r\n            >\r\n                <div className=\"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-500 via-indigo-500 to-gray-900 animate-pulse\"></div>\r\n                <div className=\"z-10 relative max-w-lg\">\r\n                    <h1 className=\"text-5xl font-extrabold mb-6 tracking-tight\">Welcome Back.</h1>\r\n                    <p className=\"text-xl text-gray-300 leading-relaxed\">\r\n                        Log in to access your messages, manage your listings, and continue your shopping journey.\r\n                    </p>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Form Side */}\r\n            <div className=\"flex-1 flex items-center justify-center p-4 lg:p-12 relative\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 30 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.2, duration: 0.5 }}\r\n                    className=\"w-full max-w-md bg-white dark:bg-gray-900 rounded-3xl shadow-xl shadow-gray-200/50 dark:shadow-none p-8 border border-gray-100 dark:border-gray-800\"\r\n                >\r\n                    <div className=\"text-center mb-10\">\r\n                        <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-50 dark:bg-blue-900/20 rounded-2xl mb-4\">\r\n                            <Lock className=\"text-blue-600\" size={30} />\r\n                        </div>\r\n                        <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">Login</h2>\r\n                        <p className=\"text-gray-500 dark:text-gray-400\">Enter your credentials to continue</p>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            className=\"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm font-medium mb-6 flex items-center gap-2 border border-red-100 dark:border-red-900/20\"\r\n                        >\r\n                            <span className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></span>\r\n                            {error}\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 ml-1\">Email Address</label>\r\n                            <div className=\"relative\">\r\n                                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={emailRef}\r\n                                    type=\"email\"\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-4 py-3.5 bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium text-gray-900 dark:text-white\"\r\n                                    placeholder=\"you@example.com\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <div className=\"flex justify-between items-center mb-2 ml-1\">\r\n                                <label className=\"block text-sm font-bold text-gray-700 dark:text-gray-300\">Password</label>\r\n                                <Link to=\"/forgot-password\" size=\"sm\" className=\"text-xs font-bold text-blue-600 hover:text-blue-700\">\r\n                                    Forgot password?\r\n                                </Link>\r\n                            </div>\r\n                            <div className=\"relative\">\r\n                                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={passwordRef}\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-12 py-3.5 bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium text-gray-900 dark:text-white\"\r\n                                    placeholder=\"Enter your password\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 focus:outline-none\"\r\n                                >\r\n                                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-2\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 group\"\r\n                            >\r\n                                {loading ? <Loader className=\"animate-spin\" size={20} /> : (\r\n                                    <>\r\n                                        Sign In <ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 text-center border-t border-gray-100 dark:border-gray-800 pt-8\">\r\n                        <p className=\"text-gray-500 dark:text-gray-400\">\r\n                            Don't have an account?{\" \"}\r\n                            <Link to=\"/register\" className=\"font-bold text-blue-600 hover:text-blue-700 hover:underline\">\r\n                                Sign up\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\Profile.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[254,293],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { Link } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { User, Package, Calendar, MapPin, ArrowRight, Plus, Camera, Loader } from 'lucide-react';\r\nimport axios from 'axios';\r\n\r\nconst IMGBB_API_KEY = \"5c96460dbce35dbdb36e2e26b2dad63e\";\r\n\r\nexport default function Profile() {\r\n    const { currentUser, updateUserProfile } = useAuth();\r\n    const [myListings, setMyListings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [uploading, setUploading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        async function fetchMyListings() {\r\n            const q = query(\r\n                collection(db, \"listings\"),\r\n                where(\"userId\", \"==\", currentUser.uid)\r\n            );\r\n\r\n            const querySnapshot = await getDocs(q);\r\n            const data = querySnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })).sort((a, b) => b.createdAt?.seconds - a.createdAt?.seconds);\r\n            setMyListings(data);\r\n            setLoading(false);\r\n        }\r\n\r\n        if (currentUser) {\r\n            fetchMyListings();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const handleImageChange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        setUploading(true);\r\n        const formData = new FormData();\r\n        formData.append(\"image\", file);\r\n        formData.append(\"key\", IMGBB_API_KEY);\r\n\r\n        try {\r\n            const response = await axios.post(\"https://api.imgbb.com/1/upload\", formData);\r\n            const imageUrl = response.data.data.display_url;\r\n            await updateUserProfile(currentUser, { photoURL: imageUrl });\r\n        } catch (err) {\r\n            console.error(\"Failed to upload profile picture:\", err);\r\n            alert(\"Failed to update profile picture.\");\r\n        }\r\n        setUploading(false);\r\n    };\r\n\r\n    const container = {\r\n        hidden: { opacity: 0 },\r\n        show: {\r\n            opacity: 1,\r\n            transition: { staggerChildren: 0.1 }\r\n        }\r\n    };\r\n\r\n    const item = {\r\n        hidden: { opacity: 0, y: 20 },\r\n        show: { opacity: 1, y: 0 }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto space-y-8\">\r\n            {/* Profile Header */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"bg-white dark:bg-gray-900 rounded-3xl shadow-xl shadow-gray-200/50 dark:shadow-none overflow-hidden border border-gray-100 dark:border-gray-800 transition-colors\"\r\n            >\r\n                <div className=\"h-32 bg-gradient-to-r from-blue-600 to-indigo-600 relative\">\r\n                    <div className=\"absolute -bottom-12 left-8\">\r\n                        <div className=\"relative group\">\r\n                            <div className=\"w-24 h-24 bg-white dark:bg-gray-800 rounded-2xl p-1 shadow-lg transition-colors\">\r\n                                <div className=\"w-full h-full bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center overflow-hidden\">\r\n                                    {currentUser?.photoURL ? (\r\n                                        <img src={currentUser.photoURL} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                                    ) : (\r\n                                        <div className=\"text-4xl text-gray-400\">≡ƒæñ</div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Upload Overlay */}\r\n                            <label className=\"absolute inset-0 flex items-center justify-center bg-black/50 rounded-2xl opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity\">\r\n                                {uploading ? <Loader className=\"animate-spin text-white\" /> : <Camera className=\"text-white\" />}\r\n                                <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleImageChange} disabled={uploading} />\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"pt-16 pb-8 px-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{currentUser?.displayName || currentUser?.email?.split('@')[0]}</h1>\r\n                        <p className=\"text-gray-500 dark:text-gray-400 font-medium\">{currentUser?.email}</p>\r\n                    </div>\r\n                    <div className=\"flex gap-4\">\r\n                        <div className=\"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-xl border border-blue-100 dark:border-blue-900/30 transition-colors\">\r\n                            <span className=\"block text-xs text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wider\">Active Listings</span>\r\n                            <span className=\"text-2xl font-black text-gray-900 dark:text-white\">{myListings.length}</span>\r\n                        </div>\r\n                        <Link to=\"/create-listing\" className=\"bg-gray-900 dark:bg-blue-600 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 hover:bg-black dark:hover:bg-blue-700 transition-colors shadow-lg shadow-gray-900/20 dark:shadow-blue-500/20\">\r\n                            <Plus size={20} /> New Listing\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Listings Section */}\r\n            <div>\r\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                    <Package className=\"text-blue-600 dark:text-blue-400\" /> My Inventory\r\n                </h2>\r\n\r\n                {loading ? (\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {[1, 2, 3].map(i => (\r\n                            <div key={i} className=\"bg-white dark:bg-gray-900 rounded-2xl h-80 animate-pulse shadow-sm border border-gray-100 dark:border-gray-800\"></div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <motion.div\r\n                        variants={container}\r\n                        initial=\"hidden\"\r\n                        animate=\"show\"\r\n                        className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\"\r\n                    >\r\n                        {myListings.length === 0 ? (\r\n                            <div className=\"col-span-full py-20 text-center bg-white dark:bg-gray-900 rounded-3xl border border-dashed border-gray-300 dark:border-gray-700 transition-colors\">\r\n                                <div className=\"w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400 dark:text-gray-600\">\r\n                                    <Package size={32} />\r\n                                </div>\r\n                                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">No listings yet</h3>\r\n                                <p className=\"text-gray-500 dark:text-gray-400 mb-6\">Start selling your items today!</p>\r\n                                <Link to=\"/create-listing\" className=\"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 font-bold hover:underline\">\r\n                                    Create your first listing <ArrowRight size={16} />\r\n                                </Link>\r\n                            </div>\r\n                        ) : (\r\n                            myListings.map(listing => (\r\n                                <motion.div key={listing.id} variants={item}>\r\n                                    <Link to={`/listing/${listing.id}`} className=\"group block bg-white dark:bg-gray-900 rounded-2xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-gray-800 overflow-hidden h-full flex flex-col\">\r\n                                        <div className=\"aspect-[4/3] bg-gray-100 dark:bg-gray-800 relative overflow-hidden\">\r\n                                            <img\r\n                                                src={listing.imageUrl}\r\n                                                alt={listing.title}\r\n                                                className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                                            />\r\n                                            <div className=\"absolute top-3 right-3\">\r\n                                                <span className=\"bg-white/90 dark:bg-gray-900/90 backdrop-blur text-xs font-bold px-2 py-1 rounded-lg shadow-sm text-gray-900 dark:text-white\">\r\n                                                    {listing.category}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"p-5 flex flex-col flex-1\">\r\n                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                <h3 className=\"font-bold text-gray-900 dark:text-white line-clamp-1 group-hover:text-blue-600 transition-colors\">{listing.title}</h3>\r\n                                                <span className=\"text-blue-600 dark:text-blue-400 font-bold bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-md text-sm transition-colors\">\r\n                                                    Γéª{listing.price}\r\n                                                </span>\r\n                                            </div>\r\n\r\n                                            <p className=\"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 flex-1 transition-colors\">\r\n                                                {listing.description}\r\n                                            </p>\r\n\r\n                                            <div className=\"pt-4 border-t border-gray-100 dark:border-gray-800 flex flex-col gap-3 transition-colors\">\r\n                                                <div className=\"flex items-center gap-1.5 text-xs text-gray-400 dark:text-gray-500 min-w-0\">\r\n                                                    <MapPin size={14} className=\"text-blue-500 flex-shrink-0\" />\r\n                                                    <span className=\"truncate\">{listing.address || (listing.location ? 'Map Available' : 'No Location')}</span>\r\n                                                </div>\r\n                                                <div className=\"flex items-center justify-between text-xs font-medium text-gray-400 dark:text-gray-500\">\r\n                                                    <div className=\"flex items-center gap-1\">\r\n                                                        <Calendar size={14} />\r\n                                                        {new Date(listing.createdAt?.seconds * 1000).toLocaleDateString()}\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-1 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full transition-colors\">\r\n                                                        <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></span>\r\n                                                        Active\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Link>\r\n                                </motion.div>\r\n                            ))\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\src\\pages\\Register.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[277,316],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState } from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { db } from \"../firebase\";\r\nimport { doc, setDoc, collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Mail, Lock, User, ArrowRight, Loader, Eye, EyeOff } from \"lucide-react\";\r\n\r\nexport default function Register() {\r\n    const emailRef = useRef();\r\n    const usernameRef = useRef(); // New ref for username\r\n    const passwordRef = useRef();\r\n    const passwordConfirmRef = useRef();\r\n    const { signup, updateUserProfile } = useAuth(); // Import updateUserProfile\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n            return setError(\"Passwords do not match\");\r\n        }\r\n\r\n        try {\r\n            setError(\"\");\r\n            setLoading(true);\r\n\r\n            const username = usernameRef.current.value;\r\n            const email = emailRef.current.value;\r\n\r\n            // Check if username already exists\r\n            const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            if (!querySnapshot.empty) {\r\n                setLoading(false);\r\n                return setError(\"Username is already taken\");\r\n            }\r\n\r\n            const userCredential = await signup(email, passwordRef.current.value);\r\n\r\n            // Save user to Firestore to reserve username\r\n            await setDoc(doc(db, \"users\", userCredential.user.uid), {\r\n                username: username,\r\n                email: email,\r\n                createdAt: new Date()\r\n            });\r\n\r\n            // Update profile with username\r\n            await updateUserProfile(userCredential.user, {\r\n                displayName: username\r\n            });\r\n\r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            console.error(\"Registration error:\", error);\r\n            if (error.code === 'auth/email-already-in-use') {\r\n                setError(\"Email is already currently in use\");\r\n            } else {\r\n                setError(\"Failed to create an account\");\r\n            }\r\n        }\r\n        setLoading(false);\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-gray-50 overflow-hidden\">\r\n            {/* Visual Side */}\r\n            <motion.div\r\n                initial={{ x: -100, opacity: 0 }}\r\n                animate={{ x: 0, opacity: 1 }}\r\n                transition={{ duration: 0.6 }}\r\n                className=\"hidden lg:flex lg:w-1/2 bg-gray-900 relative items-center justify-center p-12 text-white overflow-hidden\"\r\n            >\r\n                <div className=\"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_bottom_left,_var(--tw-gradient-stops))] from-blue-500 via-purple-500 to-gray-900 animate-pulse\"></div>\r\n                <div className=\"z-10 relative max-w-lg\">\r\n                    <h1 className=\"text-5xl font-extrabold mb-6 tracking-tight\">Join Us.</h1>\r\n                    <p className=\"text-xl text-gray-300 leading-relaxed\">\r\n                        Create your account today to start selling your items and discovering great deals in your neighborhood.\r\n                    </p>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Form Side */}\r\n            <div className=\"flex-1 flex items-center justify-center p-4 lg:p-12 relative\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 30 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.2, duration: 0.5 }}\r\n                    className=\"w-full max-w-md bg-white rounded-3xl shadow-xl shadow-gray-200/50 p-8 border border-gray-100\"\r\n                >\r\n                    <div className=\"text-center mb-10\">\r\n                        <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Create Account</h2>\r\n                        <p className=\"text-gray-500\">Get started for free.</p>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            className=\"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm font-medium mb-6 flex items-center gap-2 border border-red-100\"\r\n                        >\r\n                            <span className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></span>\r\n                            {error}\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Username</label>\r\n                            <div className=\"relative\">\r\n                                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={usernameRef}\r\n                                    type=\"text\"\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"johndoe123\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Email</label>\r\n                            <div className=\"relative\">\r\n                                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={emailRef}\r\n                                    type=\"email\"\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"you@example.com\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Password</label>\r\n                            <div className=\"relative\">\r\n                                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={passwordRef}\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"Create a password\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none\"\r\n                                >\r\n                                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Confirm Password</label>\r\n                            <div className=\"relative\">\r\n                                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\r\n                                <input\r\n                                    ref={passwordConfirmRef}\r\n                                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n                                    required\r\n                                    className=\"w-full pl-12 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"Repeat password\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none\"\r\n                                >\r\n                                    {showConfirmPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-2\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 group\"\r\n                            >\r\n                                {loading ? <Loader className=\"animate-spin\" size={20} /> : (\r\n                                    <>\r\n                                        Get Started <ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 text-center\">\r\n                        <p className=\"text-gray-500\">\r\n                            Already have an account?{\" \"}\r\n                            <Link to=\"/login\" className=\"font-bold text-blue-600 hover:text-blue-700 hover:underline\">\r\n                                Log in\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\dev\\MINI-MART\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
